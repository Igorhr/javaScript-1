<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script src="common.js"></script>
  </head>
  <body>
    <script>
      var csvToArray = csvStr => csvStr.split('\n').map(arr => arr.split(','));

      var csvArr = csvToArray(csvString);
      console.log(csvArr);

      //=================================== findAverageAgeOrSalary ========================//

      function findAverageAge(gender, skill, avgType) {

          

        var filtered = csvArr.filter(developer => 
        (developer[4] === gender || gender === 'all') &&
        (developer[3] === skill || skill === 'all')
        )

        var reducedAvg = filtered.reduce((acc, dev, _, arr) => {
            acc += 2020 - parseInt(dev[0]) ;
            return acc
        }, 0)

        console.log(filtered.length);
        
        return reducedAvg / filtered.length;
      }


    //   console.log(findAverageAge('female', "frontend", "age"));

      //=================================== SortArrays ========================//

      var sortedDeveloper = (sortBy, sortDir, obj) => {
        if (sortBy === 'age') {
          sortBy = 0;
        } else if (sortBy === 'sallary') {
          sortBy = 5;
        }

        var sortedAsc = obj.sort((a, b) => a[sortBy] - b[sortBy]).slice();
        var sortedDesc = obj.sort((a, b) => b[sortBy] - a[sortBy]).slice();
        return sortDir === 'desc' ? sortedDesc : sortDir === 'asc' ? sortedAsc : 'no valid input';
      };

    //   console.log(sortedDeveloper('age', 'desc', csvArr));
    //   console.log(sortedDeveloper('age', 'asc', csvArr));
    //   console.log(sortedDeveloper('sallary', 'asc', csvArr));
    //   console.log(sortedDeveloper('sallary', 'desc', csvArr));







    </script>
  </body>
</html>
