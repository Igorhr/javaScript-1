<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>homework</title>
    <script src="common.js"></script>
  </head>
  <body>
    <script>
      var csvStringNewLineFn = str => str.split('\n');
      //   console.log(csvStringNewLineFn(csvString));
      var csvStringLineToColumnArray = str => str.map(line => line.split(','));
      //   console.log(csvStringLineToColumnArray(csvStringNewLineFn(csvString)));
      var csvStringToObject = strLine => {
        return strLine.map(line => {
          var col = line.split(',');
          return {
            age: col[0],
            firstName: col[1],
            lastName: col[2],
            skill: col[3],
            gender: col[4],
            sallary: col[5]
          };
        });
      };
      //   console.table(csvStringToObject(csvStringNewLineFn(csvString)));
      var dataObj = csvStringToObject(csvStringNewLineFn(csvString));
        console.table(dataObj)

      var averageSalary = (gender, skill, obj) => {

        var sorted = obj.filter(function(developer) {
          var genderCase = gender === 'all' || developer.gender === gender;
          var skillCase = skill === 'all' || developer.skill === skill;
          return genderCase && skillCase;
        });

        var reduceSalary = sorted.reduce(function(acc, current) {
          acc += current.sallary * 1
          return acc;
        }, 0);
        // var mapSalary = sorted.map()


        return reduceSalary / sorted.length;
      };
      console.table(averageSalary('male', 'frontend', dataObj));
    </script>
  </body>
</html>
